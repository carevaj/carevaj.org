/** Run a callback concurrently with all the elements of an Iterable */ export async function concurrent(iterable, iteratorFn, limit = 200) {
  const executing = [];
  for await (const item of iterable){
    const p = iteratorFn(item).then(()=>executing.splice(executing.indexOf(p), 1));
    executing.push(p);
    if (executing.length >= limit) {
      await Promise.race(executing);
    }
  }
  await Promise.all(executing);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImh0dHBzOi8vZGVuby5sYW5kL3gvbHVtZUB2Mi4yLjAvY29yZS91dGlscy9jb25jdXJyZW50LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKiBSdW4gYSBjYWxsYmFjayBjb25jdXJyZW50bHkgd2l0aCBhbGwgdGhlIGVsZW1lbnRzIG9mIGFuIEl0ZXJhYmxlICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29uY3VycmVudDxUeXBlPihcbiAgaXRlcmFibGU6IEFzeW5jSXRlcmFibGU8VHlwZT4gfCBJdGVyYWJsZTxUeXBlPixcbiAgaXRlcmF0b3JGbjogKGFyZzogVHlwZSkgPT4gUHJvbWlzZTx1bmtub3duPixcbiAgbGltaXQgPSAyMDAsXG4pIHtcbiAgY29uc3QgZXhlY3V0aW5nOiBQcm9taXNlPHVua25vd24+W10gPSBbXTtcblxuICBmb3IgYXdhaXQgKGNvbnN0IGl0ZW0gb2YgaXRlcmFibGUpIHtcbiAgICBjb25zdCBwOiBQcm9taXNlPHVua25vd24+ID0gaXRlcmF0b3JGbihpdGVtKS50aGVuKCgpID0+XG4gICAgICBleGVjdXRpbmcuc3BsaWNlKGV4ZWN1dGluZy5pbmRleE9mKHApLCAxKVxuICAgICk7XG5cbiAgICBleGVjdXRpbmcucHVzaChwKTtcblxuICAgIGlmIChleGVjdXRpbmcubGVuZ3RoID49IGxpbWl0KSB7XG4gICAgICBhd2FpdCBQcm9taXNlLnJhY2UoZXhlY3V0aW5nKTtcbiAgICB9XG4gIH1cblxuICBhd2FpdCBQcm9taXNlLmFsbChleGVjdXRpbmcpO1xufVxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLHFFQUFxRSxHQUNyRSxPQUFPLGVBQWUsV0FDcEIsUUFBOEMsRUFDOUMsVUFBMkMsRUFDM0MsUUFBUSxHQUFHO0VBRVgsTUFBTSxZQUFnQyxFQUFFO0VBRXhDLFdBQVcsTUFBTSxRQUFRLFNBQVU7SUFDakMsTUFBTSxJQUFzQixXQUFXLE1BQU0sSUFBSSxDQUFDLElBQ2hELFVBQVUsTUFBTSxDQUFDLFVBQVUsT0FBTyxDQUFDLElBQUk7SUFHekMsVUFBVSxJQUFJLENBQUM7SUFFZixJQUFJLFVBQVUsTUFBTSxJQUFJLE9BQU87TUFDN0IsTUFBTSxRQUFRLElBQUksQ0FBQztJQUNyQjtFQUNGO0VBRUEsTUFBTSxRQUFRLEdBQUcsQ0FBQztBQUNwQiJ9