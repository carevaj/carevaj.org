//Imports
import { SeekMode } from "./types.ts";
/**
 * Streamable string
 */ export class Streamable {
  /** Constructor */ constructor(string){
    this.#buffer = new TextEncoder().encode(string);
  }
  /** Buffer */ #buffer;
  /** Cursor */ #cursor = 0;
  /** Read bytes */ readSync(buffer) {
    const bytes = this.#buffer.slice(this.#cursor, this.#cursor + buffer.length);
    buffer.set(bytes);
    this.#cursor = Math.min(this.#cursor + bytes.length, this.#buffer.length);
    return bytes.length || null;
  }
  /** Set cursor position */ seekSync(offset, whence) {
    switch(whence){
      case SeekMode.Start:
        this.#cursor = offset;
        break;
      case SeekMode.Current:
        this.#cursor += offset;
        break;
      case SeekMode.End:
        this.#cursor = this.#buffer.length + offset;
        break;
    }
    return this.#cursor;
  }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImh0dHBzOi8vZGVuby5sYW5kL3gveG1sQDQuMC4wL3V0aWxzL3N0cmVhbWFibGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy9JbXBvcnRzXG5pbXBvcnQgeyBGbHV4LCBTZWVrTW9kZSB9IGZyb20gXCIuL3R5cGVzLnRzXCJcblxuLyoqXG4gKiBTdHJlYW1hYmxlIHN0cmluZ1xuICovXG5leHBvcnQgY2xhc3MgU3RyZWFtYWJsZSBpbXBsZW1lbnRzIEZsdXgge1xuICAvKiogQ29uc3RydWN0b3IgKi9cbiAgY29uc3RydWN0b3Ioc3RyaW5nOiBzdHJpbmcpIHtcbiAgICB0aGlzLiNidWZmZXIgPSBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoc3RyaW5nKVxuICB9XG5cbiAgLyoqIEJ1ZmZlciAqL1xuICByZWFkb25seSAjYnVmZmVyOiBVaW50OEFycmF5XG5cbiAgLyoqIEN1cnNvciAqL1xuICAjY3Vyc29yID0gMFxuXG4gIC8qKiBSZWFkIGJ5dGVzICovXG4gIHJlYWRTeW5jKGJ1ZmZlcjogVWludDhBcnJheSkge1xuICAgIGNvbnN0IGJ5dGVzID0gdGhpcy4jYnVmZmVyLnNsaWNlKHRoaXMuI2N1cnNvciwgdGhpcy4jY3Vyc29yICsgYnVmZmVyLmxlbmd0aClcbiAgICBidWZmZXIuc2V0KGJ5dGVzKVxuICAgIHRoaXMuI2N1cnNvciA9IE1hdGgubWluKHRoaXMuI2N1cnNvciArIGJ5dGVzLmxlbmd0aCwgdGhpcy4jYnVmZmVyLmxlbmd0aClcbiAgICByZXR1cm4gYnl0ZXMubGVuZ3RoIHx8IG51bGxcbiAgfVxuXG4gIC8qKiBTZXQgY3Vyc29yIHBvc2l0aW9uICovXG4gIHNlZWtTeW5jKG9mZnNldDogbnVtYmVyLCB3aGVuY2U6IHR5cGVvZiBTZWVrTW9kZVtrZXlvZiB0eXBlb2YgU2Vla01vZGVdKSB7XG4gICAgc3dpdGNoICh3aGVuY2UpIHtcbiAgICAgIGNhc2UgU2Vla01vZGUuU3RhcnQ6XG4gICAgICAgIHRoaXMuI2N1cnNvciA9IG9mZnNldFxuICAgICAgICBicmVha1xuICAgICAgY2FzZSBTZWVrTW9kZS5DdXJyZW50OlxuICAgICAgICB0aGlzLiNjdXJzb3IgKz0gb2Zmc2V0XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlIFNlZWtNb2RlLkVuZDpcbiAgICAgICAgdGhpcy4jY3Vyc29yID0gdGhpcy4jYnVmZmVyLmxlbmd0aCArIG9mZnNldFxuICAgICAgICBicmVha1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy4jY3Vyc29yXG4gIH1cbn1cbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxTQUFTO0FBQ1QsU0FBZSxRQUFRLFFBQVEsYUFBWTtBQUUzQzs7Q0FFQyxHQUNELE9BQU8sTUFBTTtFQUNYLGdCQUFnQixHQUNoQixZQUFZLE1BQWMsQ0FBRTtJQUMxQixJQUFJLENBQUMsQ0FBQyxNQUFNLEdBQUcsSUFBSSxjQUFjLE1BQU0sQ0FBQztFQUMxQztFQUVBLFdBQVcsR0FDWCxBQUFTLENBQUMsTUFBTSxDQUFZO0VBRTVCLFdBQVcsR0FDWCxDQUFDLE1BQU0sR0FBRyxFQUFDO0VBRVgsZUFBZSxHQUNmLFNBQVMsTUFBa0IsRUFBRTtJQUMzQixNQUFNLFFBQVEsSUFBSSxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLENBQUMsTUFBTSxHQUFHLE9BQU8sTUFBTTtJQUMzRSxPQUFPLEdBQUcsQ0FBQztJQUNYLElBQUksQ0FBQyxDQUFDLE1BQU0sR0FBRyxLQUFLLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNLEdBQUcsTUFBTSxNQUFNLEVBQUUsSUFBSSxDQUFDLENBQUMsTUFBTSxDQUFDLE1BQU07SUFDeEUsT0FBTyxNQUFNLE1BQU0sSUFBSTtFQUN6QjtFQUVBLHdCQUF3QixHQUN4QixTQUFTLE1BQWMsRUFBRSxNQUE4QyxFQUFFO0lBQ3ZFLE9BQVE7TUFDTixLQUFLLFNBQVMsS0FBSztRQUNqQixJQUFJLENBQUMsQ0FBQyxNQUFNLEdBQUc7UUFDZjtNQUNGLEtBQUssU0FBUyxPQUFPO1FBQ25CLElBQUksQ0FBQyxDQUFDLE1BQU0sSUFBSTtRQUNoQjtNQUNGLEtBQUssU0FBUyxHQUFHO1FBQ2YsSUFBSSxDQUFDLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLEdBQUc7UUFDckM7SUFDSjtJQUNBLE9BQU8sSUFBSSxDQUFDLENBQUMsTUFBTTtFQUNyQjtBQUNGIn0=