// deno-lint-ignore-file no-explicit-any ban-types
import { tty } from "../ansi/tty.ts";
import { GenericPrompt } from "./_generic_prompt.ts";
export function prompt(prompts, options) {
  return new PromptList(prompts, options).run(options?.initial);
}
let injected = {};
/**
 * Inject prompt values. Can be used for unit tests or pre selections.
 * @param values Input values object.
 */ export function inject(values) {
  injected = values;
}
class PromptList {
  prompts;
  options;
  result;
  index;
  names;
  isInBeforeHook;
  get prompt() {
    return this.prompts[this.index];
  }
  constructor(prompts, options){
    this.prompts = prompts;
    this.options = options;
    this.result = {};
    this.index = -1;
    this.isInBeforeHook = false;
    this.names = this.prompts.map((prompt)=>prompt.name);
  }
  async run(name) {
    this.index = -1;
    this.result = {};
    this.isInBeforeHook = false;
    await this.next(name);
    return this.result;
  }
  async next(name) {
    if (this.updateIndex(name)) {
      await this.runBeforeHook(async ()=>{
        this.isInBeforeHook = false;
        await this.runPrompt();
        await this.runAfterHook();
      });
    }
  }
  updateIndex(name) {
    if (name && typeof name === "string") {
      this.index = this.names.indexOf(name);
      if (this.index === -1) {
        throw new Error(`Invalid prompt name: ${name}, allowed prompt names: ${this.names.join(", ")}`);
      }
    } else if (typeof name === "number") {
      if (name < 0 || name > this.names.length) {
        throw new Error(`Invalid prompt index: ${name}, prompt length: ${this.names.length}`);
      }
      this.index = name;
    } else if (name === true && !this.isInBeforeHook) {
      this.index++;
      if (this.index < this.names.length - 1) {
        this.index++;
      }
    } else {
      this.index++;
    }
    this.isInBeforeHook = false;
    if (this.index < this.names.length) {
      return true;
    } else if (this.index === this.names.length) {
      return false;
    } else {
      throw new Error("next() called multiple times");
    }
  }
  async runBeforeHook(run) {
    this.isInBeforeHook = true;
    const next = async (name)=>{
      if (name || typeof name === "number") {
        return this.next(name);
      }
      await run();
    };
    if (this.options?.before) {
      await this.options.before(this.prompt.name, this.result, async (name)=>{
        if (name || typeof name === "number") {
          return this.next(name);
        } else if (this.prompt.before) {
          await this.prompt.before(this.result, next);
        } else {
          await run();
        }
      });
      return;
    } else if (this.prompt.before) {
      await this.prompt.before(this.result, next);
      return;
    }
    await run();
  }
  async runPrompt() {
    const prompt = this.prompt.type;
    if (typeof injected[this.prompt.name] !== "undefined") {
      if (prompt.inject) {
        prompt.inject(injected[this.prompt.name]);
      } else {
        GenericPrompt.inject(injected[this.prompt.name]);
      }
    }
    try {
      this.result[this.prompt.name] = await prompt.prompt({
        cbreak: this.options?.cbreak,
        ...this.prompt
      });
    } finally{
      tty.cursorShow();
    }
  }
  async runAfterHook() {
    if (this.options?.after) {
      await this.options.after(this.prompt.name, this.result, async (name)=>{
        if (name) {
          return this.next(name);
        } else if (this.prompt.after) {
          await this.prompt.after(this.result, (name)=>this.next(name));
        } else {
          await this.next();
        }
      });
    } else if (this.prompt.after) {
      await this.prompt.after(this.result, (name)=>this.next(name));
    } else {
      await this.next();
    }
  }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImh0dHBzOi8vZGVuby5sYW5kL3gvY2xpZmZ5QHYwLjI1LjcvcHJvbXB0L3Byb21wdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBkZW5vLWxpbnQtaWdub3JlLWZpbGUgbm8tZXhwbGljaXQtYW55IGJhbi10eXBlc1xuXG5pbXBvcnQgeyB0dHkgfSBmcm9tIFwiLi4vYW5zaS90dHkudHNcIjtcbmltcG9ydCB7XG4gIEdlbmVyaWNQcm9tcHQsXG4gIEdlbmVyaWNQcm9tcHRPcHRpb25zLFxuICBTdGF0aWNHZW5lcmljUHJvbXB0LFxufSBmcm9tIFwiLi9fZ2VuZXJpY19wcm9tcHQudHNcIjtcblxudHlwZSBOZXh0PFROYW1lIGV4dGVuZHMga2V5b2YgYW55PiA9IChcbiAgbmV4dD86IFROYW1lIHwgbnVtYmVyIHwgdHJ1ZSB8IG51bGwsXG4pID0+IFByb21pc2U8dm9pZD47XG5cbnR5cGUgUHJvbXB0T3B0aW9uczxcbiAgVE5hbWUgZXh0ZW5kcyBzdHJpbmcsXG4gIFRTdGF0aWNQcm9tcHQgZXh0ZW5kcyBTdGF0aWNHZW5lcmljUHJvbXB0PGFueSwgYW55LCBhbnksIGFueSwgYW55PiB8IHZvaWQsXG4gIFRSZXN1bHQsXG4gIFRPcHRpb25zID0gVFN0YXRpY1Byb21wdCBleHRlbmRzIFN0YXRpY0dlbmVyaWNQcm9tcHQ8YW55LCBhbnksIGFueSwgYW55LCBhbnk+XG4gICAgPyBQYXJhbWV0ZXJzPFRTdGF0aWNQcm9tcHRbXCJwcm9tcHRcIl0+WzBdXG4gICAgOiBuZXZlcixcbj4gPSBUU3RhdGljUHJvbXB0IGV4dGVuZHMgU3RhdGljR2VuZXJpY1Byb21wdDxhbnksIGFueSwgYW55LCBhbnksIGFueT4gPyBcbiAgICAmIHtcbiAgICAgIG5hbWU6IFROYW1lO1xuICAgICAgdHlwZTogVFN0YXRpY1Byb21wdDtcbiAgICAgIGJlZm9yZT86IChcbiAgICAgICAgb3B0czogVFJlc3VsdCxcbiAgICAgICAgbmV4dDogTmV4dDxFeGNsdWRlPGtleW9mIFRSZXN1bHQsIHN5bWJvbD4+LFxuICAgICAgKSA9PiB2b2lkIHwgUHJvbWlzZTx2b2lkPjtcbiAgICAgIGFmdGVyPzogKFxuICAgICAgICBvcHRzOiBUUmVzdWx0LFxuICAgICAgICBuZXh0OiBOZXh0PEV4Y2x1ZGU8a2V5b2YgVFJlc3VsdCwgc3ltYm9sPj4sXG4gICAgICApID0+IHZvaWQgfCBQcm9taXNlPHZvaWQ+O1xuICAgIH1cbiAgICAvLyBleGNsdWRlIG5vbmUgb3B0aW9ucyBwYXJhbWV0ZXJcbiAgICAmIChUT3B0aW9ucyBleHRlbmRzIEdlbmVyaWNQcm9tcHRPcHRpb25zPGFueSwgYW55PiA/IFRPcHRpb25zIDoge30pXG4gIDogbmV2ZXI7XG5cbnR5cGUgUHJvbXB0UmVzdWx0PFxuICBOIGV4dGVuZHMgc3RyaW5nLFxuICBHIGV4dGVuZHMgU3RhdGljR2VuZXJpY1Byb21wdDxhbnksIGFueSwgYW55LCBhbnksIGFueT4gfCB2b2lkLFxuPiA9IEcgZXh0ZW5kcyBTdGF0aWNHZW5lcmljUHJvbXB0PGFueSwgYW55LCBhbnksIGFueSwgYW55PiA/IHtcbiAgICBbSyBpbiBOXT86IEF3YWl0ZWQ8UmV0dXJuVHlwZTxHW1wicHJvbXB0XCJdPj47XG4gIH1cbiAgOiB7fTtcblxuaW50ZXJmYWNlIFByb21wdExpc3RPcHRpb25zPFIsIE4gZXh0ZW5kcyBrZXlvZiBSID0ga2V5b2YgUj4ge1xuICBjYnJlYWs/OiBib29sZWFuO1xuICBiZWZvcmU/OiAoXG4gICAgbmFtZTogTixcbiAgICBvcHRzOiBSLFxuICAgIG5leHQ6IE5leHQ8RXhjbHVkZTxOLCBzeW1ib2w+PixcbiAgKSA9PiB2b2lkIHwgUHJvbWlzZTx2b2lkPjtcbiAgYWZ0ZXI/OiAoXG4gICAgbmFtZTogTixcbiAgICBvcHRzOiBSLFxuICAgIG5leHQ6IE5leHQ8RXhjbHVkZTxOLCBzeW1ib2w+PixcbiAgKSA9PiB2b2lkIHwgUHJvbWlzZTx2b2lkPjtcbn1cblxuLyoqIEdsb2JhbCBwcm9tcHQgb3B0aW9ucy4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgR2xvYmFsUHJvbXB0T3B0aW9uczxSLCBOIGV4dGVuZHMga2V5b2YgUiA9IGtleW9mIFI+XG4gIGV4dGVuZHMgUHJvbXB0TGlzdE9wdGlvbnM8UiwgTj4ge1xuICBpbml0aWFsPzogTiBleHRlbmRzIHN5bWJvbCA/IG5ldmVyIDogTjtcbn1cblxudHlwZSBJZDxUPiA9IFQgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPlxuICA/IFQgZXh0ZW5kcyBpbmZlciBVID8geyBbSyBpbiBrZXlvZiBVXTogSWQ8VVtLXT4gfSA6IG5ldmVyXG4gIDogVDtcblxuZXhwb3J0IGZ1bmN0aW9uIHByb21wdDxcbiAgVE5hbWUwIGV4dGVuZHMgc3RyaW5nLFxuICBUTmFtZTEgZXh0ZW5kcyBzdHJpbmcsXG4gIFROYW1lMiBleHRlbmRzIHN0cmluZyxcbiAgVE5hbWUzIGV4dGVuZHMgc3RyaW5nLFxuICBUTmFtZTQgZXh0ZW5kcyBzdHJpbmcsXG4gIFROYW1lNSBleHRlbmRzIHN0cmluZyxcbiAgVE5hbWU2IGV4dGVuZHMgc3RyaW5nLFxuICBUTmFtZTcgZXh0ZW5kcyBzdHJpbmcsXG4gIFROYW1lOCBleHRlbmRzIHN0cmluZyxcbiAgVE5hbWU5IGV4dGVuZHMgc3RyaW5nLFxuICBUTmFtZTEwIGV4dGVuZHMgc3RyaW5nLFxuICBUTmFtZTExIGV4dGVuZHMgc3RyaW5nLFxuICBUTmFtZTEyIGV4dGVuZHMgc3RyaW5nLFxuICBUTmFtZTEzIGV4dGVuZHMgc3RyaW5nLFxuICBUTmFtZTE0IGV4dGVuZHMgc3RyaW5nLFxuICBUTmFtZTE1IGV4dGVuZHMgc3RyaW5nLFxuICBUTmFtZTE2IGV4dGVuZHMgc3RyaW5nLFxuICBUTmFtZTE3IGV4dGVuZHMgc3RyaW5nLFxuICBUTmFtZTE4IGV4dGVuZHMgc3RyaW5nLFxuICBUTmFtZTE5IGV4dGVuZHMgc3RyaW5nLFxuICBUTmFtZTIwIGV4dGVuZHMgc3RyaW5nLFxuICBUTmFtZTIxIGV4dGVuZHMgc3RyaW5nLFxuICBUTmFtZTIyIGV4dGVuZHMgc3RyaW5nLFxuICBUTmFtZTIzIGV4dGVuZHMgc3RyaW5nLFxuICBUT3B0aW9uczAgZXh0ZW5kcyBHZW5lcmljUHJvbXB0T3B0aW9uczxhbnksIGFueT4sXG4gIFRPcHRpb25zMSBleHRlbmRzIEdlbmVyaWNQcm9tcHRPcHRpb25zPGFueSwgYW55PixcbiAgVE9wdGlvbnMyIGV4dGVuZHMgR2VuZXJpY1Byb21wdE9wdGlvbnM8YW55LCBhbnk+LFxuICBUT3B0aW9uczMgZXh0ZW5kcyBHZW5lcmljUHJvbXB0T3B0aW9uczxhbnksIGFueT4sXG4gIFRPcHRpb25zNCBleHRlbmRzIEdlbmVyaWNQcm9tcHRPcHRpb25zPGFueSwgYW55PixcbiAgVE9wdGlvbnM1IGV4dGVuZHMgR2VuZXJpY1Byb21wdE9wdGlvbnM8YW55LCBhbnk+LFxuICBUT3B0aW9uczYgZXh0ZW5kcyBHZW5lcmljUHJvbXB0T3B0aW9uczxhbnksIGFueT4sXG4gIFRPcHRpb25zNyBleHRlbmRzIEdlbmVyaWNQcm9tcHRPcHRpb25zPGFueSwgYW55PixcbiAgVE9wdGlvbnM4IGV4dGVuZHMgR2VuZXJpY1Byb21wdE9wdGlvbnM8YW55LCBhbnk+LFxuICBUT3B0aW9uczkgZXh0ZW5kcyBHZW5lcmljUHJvbXB0T3B0aW9uczxhbnksIGFueT4sXG4gIFRPcHRpb25zMTAgZXh0ZW5kcyBHZW5lcmljUHJvbXB0T3B0aW9uczxhbnksIGFueT4sXG4gIFRPcHRpb25zMTEgZXh0ZW5kcyBHZW5lcmljUHJvbXB0T3B0aW9uczxhbnksIGFueT4sXG4gIFRPcHRpb25zMTIgZXh0ZW5kcyBHZW5lcmljUHJvbXB0T3B0aW9uczxhbnksIGFueT4sXG4gIFRPcHRpb25zMTMgZXh0ZW5kcyBHZW5lcmljUHJvbXB0T3B0aW9uczxhbnksIGFueT4sXG4gIFRPcHRpb25zMTQgZXh0ZW5kcyBHZW5lcmljUHJvbXB0T3B0aW9uczxhbnksIGFueT4sXG4gIFRPcHRpb25zMTUgZXh0ZW5kcyBHZW5lcmljUHJvbXB0T3B0aW9uczxhbnksIGFueT4sXG4gIFRPcHRpb25zMTYgZXh0ZW5kcyBHZW5lcmljUHJvbXB0T3B0aW9uczxhbnksIGFueT4sXG4gIFRPcHRpb25zMTcgZXh0ZW5kcyBHZW5lcmljUHJvbXB0T3B0aW9uczxhbnksIGFueT4sXG4gIFRPcHRpb25zMTggZXh0ZW5kcyBHZW5lcmljUHJvbXB0T3B0aW9uczxhbnksIGFueT4sXG4gIFRPcHRpb25zMTkgZXh0ZW5kcyBHZW5lcmljUHJvbXB0T3B0aW9uczxhbnksIGFueT4sXG4gIFRPcHRpb25zMjAgZXh0ZW5kcyBHZW5lcmljUHJvbXB0T3B0aW9uczxhbnksIGFueT4sXG4gIFRPcHRpb25zMjEgZXh0ZW5kcyBHZW5lcmljUHJvbXB0T3B0aW9uczxhbnksIGFueT4sXG4gIFRPcHRpb25zMjIgZXh0ZW5kcyBHZW5lcmljUHJvbXB0T3B0aW9uczxhbnksIGFueT4sXG4gIFRPcHRpb25zMjMgZXh0ZW5kcyBHZW5lcmljUHJvbXB0T3B0aW9uczxhbnksIGFueT4sXG4gIFRTdGF0aWNQcm9tcHQwIGV4dGVuZHMgU3RhdGljR2VuZXJpY1Byb21wdDxhbnksIGFueSwgVE9wdGlvbnMwLCBhbnksIGFueT4sXG4gIFRTdGF0aWNQcm9tcHQxIGV4dGVuZHNcbiAgICB8IFN0YXRpY0dlbmVyaWNQcm9tcHQ8YW55LCBhbnksIFRPcHRpb25zMSwgYW55LCBhbnk+XG4gICAgfCB2b2lkID0gdm9pZCxcbiAgVFN0YXRpY1Byb21wdDIgZXh0ZW5kc1xuICAgIHwgU3RhdGljR2VuZXJpY1Byb21wdDxhbnksIGFueSwgVE9wdGlvbnMyLCBhbnksIGFueT5cbiAgICB8IHZvaWQgPSB2b2lkLFxuICBUU3RhdGljUHJvbXB0MyBleHRlbmRzXG4gICAgfCBTdGF0aWNHZW5lcmljUHJvbXB0PGFueSwgYW55LCBUT3B0aW9uczMsIGFueSwgYW55PlxuICAgIHwgdm9pZCA9IHZvaWQsXG4gIFRTdGF0aWNQcm9tcHQ0IGV4dGVuZHNcbiAgICB8IFN0YXRpY0dlbmVyaWNQcm9tcHQ8YW55LCBhbnksIFRPcHRpb25zNCwgYW55LCBhbnk+XG4gICAgfCB2b2lkID0gdm9pZCxcbiAgVFN0YXRpY1Byb21wdDUgZXh0ZW5kc1xuICAgIHwgU3RhdGljR2VuZXJpY1Byb21wdDxhbnksIGFueSwgVE9wdGlvbnM1LCBhbnksIGFueT5cbiAgICB8IHZvaWQgPSB2b2lkLFxuICBUU3RhdGljUHJvbXB0NiBleHRlbmRzXG4gICAgfCBTdGF0aWNHZW5lcmljUHJvbXB0PGFueSwgYW55LCBUT3B0aW9uczYsIGFueSwgYW55PlxuICAgIHwgdm9pZCA9IHZvaWQsXG4gIFRTdGF0aWNQcm9tcHQ3IGV4dGVuZHNcbiAgICB8IFN0YXRpY0dlbmVyaWNQcm9tcHQ8YW55LCBhbnksIFRPcHRpb25zNywgYW55LCBhbnk+XG4gICAgfCB2b2lkID0gdm9pZCxcbiAgVFN0YXRpY1Byb21wdDggZXh0ZW5kc1xuICAgIHwgU3RhdGljR2VuZXJpY1Byb21wdDxhbnksIGFueSwgVE9wdGlvbnM4LCBhbnksIGFueT5cbiAgICB8IHZvaWQgPSB2b2lkLFxuICBUU3RhdGljUHJvbXB0OSBleHRlbmRzXG4gICAgfCBTdGF0aWNHZW5lcmljUHJvbXB0PGFueSwgYW55LCBUT3B0aW9uczksIGFueSwgYW55PlxuICAgIHwgdm9pZCA9IHZvaWQsXG4gIFRTdGF0aWNQcm9tcHQxMCBleHRlbmRzXG4gICAgfCBTdGF0aWNHZW5lcmljUHJvbXB0PGFueSwgYW55LCBUT3B0aW9uczEwLCBhbnksIGFueT5cbiAgICB8IHZvaWQgPSB2b2lkLFxuICBUU3RhdGljUHJvbXB0MTEgZXh0ZW5kc1xuICAgIHwgU3RhdGljR2VuZXJpY1Byb21wdDxhbnksIGFueSwgVE9wdGlvbnMxMSwgYW55LCBhbnk+XG4gICAgfCB2b2lkID0gdm9pZCxcbiAgVFN0YXRpY1Byb21wdDEyIGV4dGVuZHNcbiAgICB8IFN0YXRpY0dlbmVyaWNQcm9tcHQ8YW55LCBhbnksIFRPcHRpb25zMTIsIGFueSwgYW55PlxuICAgIHwgdm9pZCA9IHZvaWQsXG4gIFRTdGF0aWNQcm9tcHQxMyBleHRlbmRzXG4gICAgfCBTdGF0aWNHZW5lcmljUHJvbXB0PGFueSwgYW55LCBUT3B0aW9uczEzLCBhbnksIGFueT5cbiAgICB8IHZvaWQgPSB2b2lkLFxuICBUU3RhdGljUHJvbXB0MTQgZXh0ZW5kc1xuICAgIHwgU3RhdGljR2VuZXJpY1Byb21wdDxhbnksIGFueSwgVE9wdGlvbnMxNCwgYW55LCBhbnk+XG4gICAgfCB2b2lkID0gdm9pZCxcbiAgVFN0YXRpY1Byb21wdDE1IGV4dGVuZHNcbiAgICB8IFN0YXRpY0dlbmVyaWNQcm9tcHQ8YW55LCBhbnksIFRPcHRpb25zMTUsIGFueSwgYW55PlxuICAgIHwgdm9pZCA9IHZvaWQsXG4gIFRTdGF0aWNQcm9tcHQxNiBleHRlbmRzXG4gICAgfCBTdGF0aWNHZW5lcmljUHJvbXB0PGFueSwgYW55LCBUT3B0aW9uczE2LCBhbnksIGFueT5cbiAgICB8IHZvaWQgPSB2b2lkLFxuICBUU3RhdGljUHJvbXB0MTcgZXh0ZW5kc1xuICAgIHwgU3RhdGljR2VuZXJpY1Byb21wdDxhbnksIGFueSwgVE9wdGlvbnMxNywgYW55LCBhbnk+XG4gICAgfCB2b2lkID0gdm9pZCxcbiAgVFN0YXRpY1Byb21wdDE4IGV4dGVuZHNcbiAgICB8IFN0YXRpY0dlbmVyaWNQcm9tcHQ8YW55LCBhbnksIFRPcHRpb25zMTgsIGFueSwgYW55PlxuICAgIHwgdm9pZCA9IHZvaWQsXG4gIFRTdGF0aWNQcm9tcHQxOSBleHRlbmRzXG4gICAgfCBTdGF0aWNHZW5lcmljUHJvbXB0PGFueSwgYW55LCBUT3B0aW9uczE5LCBhbnksIGFueT5cbiAgICB8IHZvaWQgPSB2b2lkLFxuICBUU3RhdGljUHJvbXB0MjAgZXh0ZW5kc1xuICAgIHwgU3RhdGljR2VuZXJpY1Byb21wdDxhbnksIGFueSwgVE9wdGlvbnMyMCwgYW55LCBhbnk+XG4gICAgfCB2b2lkID0gdm9pZCxcbiAgVFN0YXRpY1Byb21wdDIxIGV4dGVuZHNcbiAgICB8IFN0YXRpY0dlbmVyaWNQcm9tcHQ8YW55LCBhbnksIFRPcHRpb25zMjEsIGFueSwgYW55PlxuICAgIHwgdm9pZCA9IHZvaWQsXG4gIFRTdGF0aWNQcm9tcHQyMiBleHRlbmRzXG4gICAgfCBTdGF0aWNHZW5lcmljUHJvbXB0PGFueSwgYW55LCBUT3B0aW9uczIyLCBhbnksIGFueT5cbiAgICB8IHZvaWQgPSB2b2lkLFxuICBUU3RhdGljUHJvbXB0MjMgZXh0ZW5kc1xuICAgIHwgU3RhdGljR2VuZXJpY1Byb21wdDxhbnksIGFueSwgVE9wdGlvbnMyMywgYW55LCBhbnk+XG4gICAgfCB2b2lkID0gdm9pZCxcbiAgVFJlc3VsdCA9IElkPFxuICAgICYgUHJvbXB0UmVzdWx0PFROYW1lMCwgVFN0YXRpY1Byb21wdDA+XG4gICAgJiBQcm9tcHRSZXN1bHQ8VE5hbWUxLCBUU3RhdGljUHJvbXB0MT5cbiAgICAmIFByb21wdFJlc3VsdDxUTmFtZTIsIFRTdGF0aWNQcm9tcHQyPlxuICAgICYgUHJvbXB0UmVzdWx0PFROYW1lMywgVFN0YXRpY1Byb21wdDM+XG4gICAgJiBQcm9tcHRSZXN1bHQ8VE5hbWU0LCBUU3RhdGljUHJvbXB0ND5cbiAgICAmIFByb21wdFJlc3VsdDxUTmFtZTUsIFRTdGF0aWNQcm9tcHQ1PlxuICAgICYgUHJvbXB0UmVzdWx0PFROYW1lNiwgVFN0YXRpY1Byb21wdDY+XG4gICAgJiBQcm9tcHRSZXN1bHQ8VE5hbWU3LCBUU3RhdGljUHJvbXB0Nz5cbiAgICAmIFByb21wdFJlc3VsdDxUTmFtZTgsIFRTdGF0aWNQcm9tcHQ4PlxuICAgICYgUHJvbXB0UmVzdWx0PFROYW1lOSwgVFN0YXRpY1Byb21wdDk+XG4gICAgJiBQcm9tcHRSZXN1bHQ8VE5hbWUxMCwgVFN0YXRpY1Byb21wdDEwPlxuICAgICYgUHJvbXB0UmVzdWx0PFROYW1lMTEsIFRTdGF0aWNQcm9tcHQxMT5cbiAgICAmIFByb21wdFJlc3VsdDxUTmFtZTEyLCBUU3RhdGljUHJvbXB0MTI+XG4gICAgJiBQcm9tcHRSZXN1bHQ8VE5hbWUxMywgVFN0YXRpY1Byb21wdDEzPlxuICAgICYgUHJvbXB0UmVzdWx0PFROYW1lMTQsIFRTdGF0aWNQcm9tcHQxND5cbiAgICAmIFByb21wdFJlc3VsdDxUTmFtZTE1LCBUU3RhdGljUHJvbXB0MTU+XG4gICAgJiBQcm9tcHRSZXN1bHQ8VE5hbWUxNiwgVFN0YXRpY1Byb21wdDE2PlxuICAgICYgUHJvbXB0UmVzdWx0PFROYW1lMTcsIFRTdGF0aWNQcm9tcHQxNz5cbiAgICAmIFByb21wdFJlc3VsdDxUTmFtZTE4LCBUU3RhdGljUHJvbXB0MTg+XG4gICAgJiBQcm9tcHRSZXN1bHQ8VE5hbWUxOSwgVFN0YXRpY1Byb21wdDE5PlxuICAgICYgUHJvbXB0UmVzdWx0PFROYW1lMjAsIFRTdGF0aWNQcm9tcHQyMD5cbiAgICAmIFByb21wdFJlc3VsdDxUTmFtZTIxLCBUU3RhdGljUHJvbXB0MjE+XG4gICAgJiBQcm9tcHRSZXN1bHQ8VE5hbWUyMiwgVFN0YXRpY1Byb21wdDIyPlxuICAgICYgUHJvbXB0UmVzdWx0PFROYW1lMjMsIFRTdGF0aWNQcm9tcHQyMz5cbiAgPixcbj4ocHJvbXB0czogW1xuICBQcm9tcHRPcHRpb25zPFROYW1lMCwgVFN0YXRpY1Byb21wdDAsIFRSZXN1bHQ+LFxuICBQcm9tcHRPcHRpb25zPFROYW1lMSwgVFN0YXRpY1Byb21wdDEsIFRSZXN1bHQ+PyxcbiAgUHJvbXB0T3B0aW9uczxUTmFtZTIsIFRTdGF0aWNQcm9tcHQyLCBUUmVzdWx0Pj8sXG4gIFByb21wdE9wdGlvbnM8VE5hbWUzLCBUU3RhdGljUHJvbXB0MywgVFJlc3VsdD4/LFxuICBQcm9tcHRPcHRpb25zPFROYW1lNCwgVFN0YXRpY1Byb21wdDQsIFRSZXN1bHQ+PyxcbiAgUHJvbXB0T3B0aW9uczxUTmFtZTUsIFRTdGF0aWNQcm9tcHQ1LCBUUmVzdWx0Pj8sXG4gIFByb21wdE9wdGlvbnM8VE5hbWU2LCBUU3RhdGljUHJvbXB0NiwgVFJlc3VsdD4/LFxuICBQcm9tcHRPcHRpb25zPFROYW1lNywgVFN0YXRpY1Byb21wdDcsIFRSZXN1bHQ+PyxcbiAgUHJvbXB0T3B0aW9uczxUTmFtZTgsIFRTdGF0aWNQcm9tcHQ4LCBUUmVzdWx0Pj8sXG4gIFByb21wdE9wdGlvbnM8VE5hbWU5LCBUU3RhdGljUHJvbXB0OSwgVFJlc3VsdD4/LFxuICBQcm9tcHRPcHRpb25zPFROYW1lMTAsIFRTdGF0aWNQcm9tcHQxMCwgVFJlc3VsdD4/LFxuICBQcm9tcHRPcHRpb25zPFROYW1lMTEsIFRTdGF0aWNQcm9tcHQxMSwgVFJlc3VsdD4/LFxuICBQcm9tcHRPcHRpb25zPFROYW1lMTIsIFRTdGF0aWNQcm9tcHQxMiwgVFJlc3VsdD4/LFxuICBQcm9tcHRPcHRpb25zPFROYW1lMTMsIFRTdGF0aWNQcm9tcHQxMywgVFJlc3VsdD4/LFxuICBQcm9tcHRPcHRpb25zPFROYW1lMTQsIFRTdGF0aWNQcm9tcHQxNCwgVFJlc3VsdD4/LFxuICBQcm9tcHRPcHRpb25zPFROYW1lMTUsIFRTdGF0aWNQcm9tcHQxNSwgVFJlc3VsdD4/LFxuICBQcm9tcHRPcHRpb25zPFROYW1lMTYsIFRTdGF0aWNQcm9tcHQxNiwgVFJlc3VsdD4/LFxuICBQcm9tcHRPcHRpb25zPFROYW1lMTcsIFRTdGF0aWNQcm9tcHQxNywgVFJlc3VsdD4/LFxuICBQcm9tcHRPcHRpb25zPFROYW1lMTgsIFRTdGF0aWNQcm9tcHQxOCwgVFJlc3VsdD4/LFxuICBQcm9tcHRPcHRpb25zPFROYW1lMTksIFRTdGF0aWNQcm9tcHQxOSwgVFJlc3VsdD4/LFxuICBQcm9tcHRPcHRpb25zPFROYW1lMjAsIFRTdGF0aWNQcm9tcHQyMCwgVFJlc3VsdD4/LFxuICBQcm9tcHRPcHRpb25zPFROYW1lMjEsIFRTdGF0aWNQcm9tcHQyMSwgVFJlc3VsdD4/LFxuICBQcm9tcHRPcHRpb25zPFROYW1lMjIsIFRTdGF0aWNQcm9tcHQyMiwgVFJlc3VsdD4/LFxuICBQcm9tcHRPcHRpb25zPFROYW1lMjMsIFRTdGF0aWNQcm9tcHQyMywgVFJlc3VsdD4/LFxuXSwgb3B0aW9ucz86IEdsb2JhbFByb21wdE9wdGlvbnM8VFJlc3VsdD4pOiBQcm9taXNlPFRSZXN1bHQ+IHtcbiAgcmV0dXJuIG5ldyBQcm9tcHRMaXN0KFxuICAgIHByb21wdHMgYXMgUHJvbXB0T3B0aW9uczxhbnksIGFueSwgYW55LCBhbnk+LFxuICAgIG9wdGlvbnMgYXMgUHJvbXB0TGlzdE9wdGlvbnM8YW55PixcbiAgKS5ydW4ob3B0aW9ucz8uaW5pdGlhbCkgYXMgUHJvbWlzZTxUUmVzdWx0Pjtcbn1cblxubGV0IGluamVjdGVkOiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge307XG5cbi8qKlxuICogSW5qZWN0IHByb21wdCB2YWx1ZXMuIENhbiBiZSB1c2VkIGZvciB1bml0IHRlc3RzIG9yIHByZSBzZWxlY3Rpb25zLlxuICogQHBhcmFtIHZhbHVlcyBJbnB1dCB2YWx1ZXMgb2JqZWN0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5qZWN0KHZhbHVlczogUmVjb3JkPHN0cmluZywgYW55Pik6IHZvaWQge1xuICBpbmplY3RlZCA9IHZhbHVlcztcbn1cblxuY2xhc3MgUHJvbXB0TGlzdCB7XG4gIHByaXZhdGUgcmVzdWx0OiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge307XG4gIHByaXZhdGUgaW5kZXggPSAtMTtcbiAgcHJpdmF0ZSBuYW1lczogQXJyYXk8c3RyaW5nPjtcbiAgcHJpdmF0ZSBpc0luQmVmb3JlSG9vayA9IGZhbHNlO1xuXG4gIHByaXZhdGUgZ2V0IHByb21wdCgpOiBQcm9tcHRPcHRpb25zPHN0cmluZywgYW55LCBhbnk+IHtcbiAgICByZXR1cm4gdGhpcy5wcm9tcHRzW3RoaXMuaW5kZXhdO1xuICB9XG5cbiAgcHVibGljIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgcHJvbXB0czogQXJyYXk8UHJvbXB0T3B0aW9uczxzdHJpbmcsIGFueSwgYW55Pj4sXG4gICAgcHJpdmF0ZSBvcHRpb25zPzogUHJvbXB0TGlzdE9wdGlvbnM8YW55PixcbiAgKSB7XG4gICAgdGhpcy5uYW1lcyA9IHRoaXMucHJvbXB0cy5tYXAoKHByb21wdCkgPT4gcHJvbXB0Lm5hbWUpO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIHJ1bihcbiAgICBuYW1lPzogc3RyaW5nIHwgbnVtYmVyIHwgdHJ1ZSxcbiAgKTogUHJvbWlzZTxSZWNvcmQ8c3RyaW5nLCBhbnk+PiB7XG4gICAgdGhpcy5pbmRleCA9IC0xO1xuICAgIHRoaXMucmVzdWx0ID0ge307XG4gICAgdGhpcy5pc0luQmVmb3JlSG9vayA9IGZhbHNlO1xuICAgIGF3YWl0IHRoaXMubmV4dChuYW1lKTtcbiAgICByZXR1cm4gdGhpcy5yZXN1bHQ7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIG5leHQobmFtZT86IHN0cmluZyB8IG51bWJlciB8IHRydWUgfCBudWxsKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKHRoaXMudXBkYXRlSW5kZXgobmFtZSkpIHtcbiAgICAgIGF3YWl0IHRoaXMucnVuQmVmb3JlSG9vayhhc3luYyAoKSA9PiB7XG4gICAgICAgIHRoaXMuaXNJbkJlZm9yZUhvb2sgPSBmYWxzZTtcbiAgICAgICAgYXdhaXQgdGhpcy5ydW5Qcm9tcHQoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5ydW5BZnRlckhvb2soKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlSW5kZXgobmFtZT86IHN0cmluZyB8IG51bWJlciB8IHRydWUgfCBudWxsKTogYm9vbGVhbiB7XG4gICAgaWYgKG5hbWUgJiYgdHlwZW9mIG5hbWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHRoaXMuaW5kZXggPSB0aGlzLm5hbWVzLmluZGV4T2YobmFtZSk7XG4gICAgICBpZiAodGhpcy5pbmRleCA9PT0gLTEpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIGBJbnZhbGlkIHByb21wdCBuYW1lOiAke25hbWV9LCBhbGxvd2VkIHByb21wdCBuYW1lczogJHtcbiAgICAgICAgICAgIHRoaXMubmFtZXMuam9pbihcIiwgXCIpXG4gICAgICAgICAgfWAsXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbmFtZSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgaWYgKG5hbWUgPCAwIHx8IG5hbWUgPiB0aGlzLm5hbWVzLmxlbmd0aCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYEludmFsaWQgcHJvbXB0IGluZGV4OiAke25hbWV9LCBwcm9tcHQgbGVuZ3RoOiAke3RoaXMubmFtZXMubGVuZ3RofWAsXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICB0aGlzLmluZGV4ID0gbmFtZTtcbiAgICB9IGVsc2UgaWYgKG5hbWUgPT09IHRydWUgJiYgIXRoaXMuaXNJbkJlZm9yZUhvb2spIHtcbiAgICAgIHRoaXMuaW5kZXgrKztcbiAgICAgIGlmICh0aGlzLmluZGV4IDwgdGhpcy5uYW1lcy5sZW5ndGggLSAxKSB7XG4gICAgICAgIHRoaXMuaW5kZXgrKztcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5pbmRleCsrO1xuICAgIH1cblxuICAgIHRoaXMuaXNJbkJlZm9yZUhvb2sgPSBmYWxzZTtcblxuICAgIGlmICh0aGlzLmluZGV4IDwgdGhpcy5uYW1lcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSBpZiAodGhpcy5pbmRleCA9PT0gdGhpcy5uYW1lcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwibmV4dCgpIGNhbGxlZCBtdWx0aXBsZSB0aW1lc1wiKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHJ1bkJlZm9yZUhvb2socnVuOiAoKSA9PiBQcm9taXNlPHZvaWQ+KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdGhpcy5pc0luQmVmb3JlSG9vayA9IHRydWU7XG5cbiAgICBjb25zdCBuZXh0ID0gYXN5bmMgKG5hbWU/OiBzdHJpbmcgfCBudW1iZXIgfCB0cnVlIHwgbnVsbCkgPT4ge1xuICAgICAgaWYgKG5hbWUgfHwgdHlwZW9mIG5hbWUgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmV4dChuYW1lIGFzIChzdHJpbmcgfCBudW1iZXIgfCB0cnVlKSk7XG4gICAgICB9XG4gICAgICBhd2FpdCBydW4oKTtcbiAgICB9O1xuXG4gICAgaWYgKHRoaXMub3B0aW9ucz8uYmVmb3JlKSB7XG4gICAgICBhd2FpdCB0aGlzLm9wdGlvbnMuYmVmb3JlKFxuICAgICAgICB0aGlzLnByb21wdC5uYW1lLFxuICAgICAgICB0aGlzLnJlc3VsdCxcbiAgICAgICAgYXN5bmMgKG5hbWU/OiBzdHJpbmcgfCBudW1iZXIgfCB0cnVlIHwgbnVsbCkgPT4ge1xuICAgICAgICAgIGlmIChuYW1lIHx8IHR5cGVvZiBuYW1lID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5uZXh0KG5hbWUgYXMgKHN0cmluZyB8IG51bWJlciB8IHRydWUpKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJvbXB0LmJlZm9yZSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wcm9tcHQuYmVmb3JlKHRoaXMucmVzdWx0LCBuZXh0KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgcnVuKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgKTtcblxuICAgICAgcmV0dXJuO1xuICAgIH0gZWxzZSBpZiAodGhpcy5wcm9tcHQuYmVmb3JlKSB7XG4gICAgICBhd2FpdCB0aGlzLnByb21wdC5iZWZvcmUodGhpcy5yZXN1bHQsIG5leHQpO1xuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgYXdhaXQgcnVuKCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHJ1blByb21wdCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBwcm9tcHQ6IFN0YXRpY0dlbmVyaWNQcm9tcHQ8YW55LCBhbnksIGFueSwgYW55LCBhbnk+ID1cbiAgICAgIHRoaXMucHJvbXB0LnR5cGU7XG5cbiAgICBpZiAodHlwZW9mIGluamVjdGVkW3RoaXMucHJvbXB0Lm5hbWVdICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBpZiAocHJvbXB0LmluamVjdCkge1xuICAgICAgICBwcm9tcHQuaW5qZWN0KGluamVjdGVkW3RoaXMucHJvbXB0Lm5hbWVdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIEdlbmVyaWNQcm9tcHQuaW5qZWN0KGluamVjdGVkW3RoaXMucHJvbXB0Lm5hbWVdKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgdGhpcy5yZXN1bHRbdGhpcy5wcm9tcHQubmFtZV0gPSBhd2FpdCBwcm9tcHQucHJvbXB0KHtcbiAgICAgICAgY2JyZWFrOiB0aGlzLm9wdGlvbnM/LmNicmVhayxcbiAgICAgICAgLi4udGhpcy5wcm9tcHQsXG4gICAgICB9KTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgdHR5LmN1cnNvclNob3coKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHJ1bkFmdGVySG9vaygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAodGhpcy5vcHRpb25zPy5hZnRlcikge1xuICAgICAgYXdhaXQgdGhpcy5vcHRpb25zLmFmdGVyKHRoaXMucHJvbXB0Lm5hbWUsIHRoaXMucmVzdWx0LCBhc3luYyAobmFtZSkgPT4ge1xuICAgICAgICBpZiAobmFtZSkge1xuICAgICAgICAgIHJldHVybiB0aGlzLm5leHQobmFtZSBhcyBzdHJpbmcpO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJvbXB0LmFmdGVyKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5wcm9tcHQuYWZ0ZXIodGhpcy5yZXN1bHQsIChuYW1lKSA9PiB0aGlzLm5leHQobmFtZSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGF3YWl0IHRoaXMubmV4dCgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKHRoaXMucHJvbXB0LmFmdGVyKSB7XG4gICAgICBhd2FpdCB0aGlzLnByb21wdC5hZnRlcih0aGlzLnJlc3VsdCwgKG5hbWUpID0+IHRoaXMubmV4dChuYW1lKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGF3YWl0IHRoaXMubmV4dCgpO1xuICAgIH1cbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLGtEQUFrRDtBQUVsRCxTQUFTLEdBQUcsUUFBUSxpQkFBaUI7QUFDckMsU0FDRSxhQUFhLFFBR1IsdUJBQXVCO0FBOEQ5QixPQUFPLFNBQVMsT0FpSmQsT0F5QkQsRUFBRSxPQUFzQztFQUN2QyxPQUFPLElBQUksV0FDVCxTQUNBLFNBQ0EsR0FBRyxDQUFDLFNBQVM7QUFDakI7QUFFQSxJQUFJLFdBQWdDLENBQUM7QUFFckM7OztDQUdDLEdBQ0QsT0FBTyxTQUFTLE9BQU8sTUFBMkI7RUFDaEQsV0FBVztBQUNiO0FBRUEsTUFBTTs7O0VBQ0ksT0FBaUM7RUFDakMsTUFBVztFQUNYLE1BQXFCO0VBQ3JCLGVBQXVCO0VBRS9CLElBQVksU0FBMEM7SUFDcEQsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUM7RUFDakM7RUFFQSxZQUNFLEFBQVEsT0FBK0MsRUFDdkQsQUFBUSxPQUFnQyxDQUN4QztTQUZRLFVBQUE7U0FDQSxVQUFBO1NBWEYsU0FBOEIsQ0FBQztTQUMvQixRQUFRLENBQUM7U0FFVCxpQkFBaUI7SUFVdkIsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLFNBQVcsT0FBTyxJQUFJO0VBQ3ZEO0VBRUEsTUFBYSxJQUNYLElBQTZCLEVBQ0M7SUFDOUIsSUFBSSxDQUFDLEtBQUssR0FBRyxDQUFDO0lBQ2QsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDO0lBQ2YsSUFBSSxDQUFDLGNBQWMsR0FBRztJQUN0QixNQUFNLElBQUksQ0FBQyxJQUFJLENBQUM7SUFDaEIsT0FBTyxJQUFJLENBQUMsTUFBTTtFQUNwQjtFQUVBLE1BQWMsS0FBSyxJQUFvQyxFQUFpQjtJQUN0RSxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsT0FBTztNQUMx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