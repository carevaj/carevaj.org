// Copyright 2018-2024 the Deno authors. All rights reserved. MIT license.
// This module is browser compatible.
var _computedKey;
import { getLevelByName, getLevelName } from "./levels.ts";
const DEFAULT_FORMATTER = ({ levelName, msg })=>`${levelName} ${msg}`;
_computedKey = Symbol.dispose;
export class BaseHandler {
  #levelName;
  #level;
  formatter;
  constructor(levelName, { formatter = DEFAULT_FORMATTER } = {}){
    this.#levelName = levelName;
    this.#level = getLevelByName(levelName);
    this.formatter = formatter;
  }
  get level() {
    return this.#level;
  }
  set level(level) {
    this.#level = level;
    this.#levelName = getLevelName(level);
  }
  get levelName() {
    return this.#levelName;
  }
  set levelName(levelName) {
    this.#levelName = levelName;
    this.#level = getLevelByName(levelName);
  }
  handle(logRecord) {
    if (this.level > logRecord.level) return;
    const msg = this.format(logRecord);
    this.log(msg);
  }
  format(logRecord) {
    return this.formatter(logRecord);
  }
  log(_msg) {}
  setup() {}
  destroy() {}
  [_computedKey]() {
    this.destroy();
  }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImh0dHBzOi8vanNyLmlvL0BzdGQvbG9nLzAuMjI0LjEvYmFzZV9oYW5kbGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE4LTIwMjQgdGhlIERlbm8gYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4gTUlUIGxpY2Vuc2UuXG4vLyBUaGlzIG1vZHVsZSBpcyBicm93c2VyIGNvbXBhdGlibGUuXG5pbXBvcnQge1xuICBnZXRMZXZlbEJ5TmFtZSxcbiAgZ2V0TGV2ZWxOYW1lLFxuICB0eXBlIExldmVsTmFtZSxcbiAgdHlwZSBMb2dMZXZlbCxcbn0gZnJvbSBcIi4vbGV2ZWxzLnRzXCI7XG5pbXBvcnQgdHlwZSB7IExvZ1JlY29yZCB9IGZyb20gXCIuL2xvZ2dlci50c1wiO1xuXG5leHBvcnQgdHlwZSBGb3JtYXR0ZXJGdW5jdGlvbiA9IChsb2dSZWNvcmQ6IExvZ1JlY29yZCkgPT4gc3RyaW5nO1xuY29uc3QgREVGQVVMVF9GT1JNQVRURVI6IEZvcm1hdHRlckZ1bmN0aW9uID0gKHsgbGV2ZWxOYW1lLCBtc2cgfSkgPT5cbiAgYCR7bGV2ZWxOYW1lfSAke21zZ31gO1xuXG5leHBvcnQgaW50ZXJmYWNlIEJhc2VIYW5kbGVyT3B0aW9ucyB7XG4gIGZvcm1hdHRlcj86IEZvcm1hdHRlckZ1bmN0aW9uO1xufVxuXG5leHBvcnQgY2xhc3MgQmFzZUhhbmRsZXIge1xuICAjbGV2ZWxOYW1lOiBMZXZlbE5hbWU7XG4gICNsZXZlbDogTG9nTGV2ZWw7XG4gIGZvcm1hdHRlcjogRm9ybWF0dGVyRnVuY3Rpb247XG5cbiAgY29uc3RydWN0b3IoXG4gICAgbGV2ZWxOYW1lOiBMZXZlbE5hbWUsXG4gICAgeyBmb3JtYXR0ZXIgPSBERUZBVUxUX0ZPUk1BVFRFUiB9OiBCYXNlSGFuZGxlck9wdGlvbnMgPSB7fSxcbiAgKSB7XG4gICAgdGhpcy4jbGV2ZWxOYW1lID0gbGV2ZWxOYW1lO1xuICAgIHRoaXMuI2xldmVsID0gZ2V0TGV2ZWxCeU5hbWUobGV2ZWxOYW1lKTtcbiAgICB0aGlzLmZvcm1hdHRlciA9IGZvcm1hdHRlcjtcbiAgfVxuXG4gIGdldCBsZXZlbCgpOiBMb2dMZXZlbCB7XG4gICAgcmV0dXJuIHRoaXMuI2xldmVsO1xuICB9XG5cbiAgc2V0IGxldmVsKGxldmVsOiBMb2dMZXZlbCkge1xuICAgIHRoaXMuI2xldmVsID0gbGV2ZWw7XG4gICAgdGhpcy4jbGV2ZWxOYW1lID0gZ2V0TGV2ZWxOYW1lKGxldmVsKTtcbiAgfVxuXG4gIGdldCBsZXZlbE5hbWUoKTogTGV2ZWxOYW1lIHtcbiAgICByZXR1cm4gdGhpcy4jbGV2ZWxOYW1lO1xuICB9XG4gIHNldCBsZXZlbE5hbWUobGV2ZWxOYW1lOiBMZXZlbE5hbWUpIHtcbiAgICB0aGlzLiNsZXZlbE5hbWUgPSBsZXZlbE5hbWU7XG4gICAgdGhpcy4jbGV2ZWwgPSBnZXRMZXZlbEJ5TmFtZShsZXZlbE5hbWUpO1xuICB9XG5cbiAgaGFuZGxlKGxvZ1JlY29yZDogTG9nUmVjb3JkKSB7XG4gICAgaWYgKHRoaXMubGV2ZWwgPiBsb2dSZWNvcmQubGV2ZWwpIHJldHVybjtcblxuICAgIGNvbnN0IG1zZyA9IHRoaXMuZm9ybWF0KGxvZ1JlY29yZCk7XG4gICAgdGhpcy5sb2cobXNnKTtcbiAgfVxuXG4gIGZvcm1hdChsb2dSZWNvcmQ6IExvZ1JlY29yZCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuZm9ybWF0dGVyKGxvZ1JlY29yZCk7XG4gIH1cblxuICBsb2coX21zZzogc3RyaW5nKSB7fVxuICBzZXR1cCgpIHt9XG4gIGRlc3Ryb3koKSB7fVxuXG4gIFtTeW1ib2wuZGlzcG9zZV0oKSB7XG4gICAgdGhpcy5kZXN0cm95KCk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSwwRUFBMEU7QUFDMUUscUNBQXFDOztBQUNyQyxTQUNFLGNBQWMsRUFDZCxZQUFZLFFBR1AsY0FBYztBQUlyQixNQUFNLG9CQUF1QyxDQUFDLEVBQUUsU0FBUyxFQUFFLEdBQUcsRUFBRSxHQUM5RCxDQUFDLEVBQUUsVUFBVSxDQUFDLEVBQUUsSUFBSSxDQUFDO2VBb0RwQixPQUFPLE9BQU87QUE5Q2pCLE9BQU8sTUFBTTtFQUNYLENBQUMsU0FBUyxDQUFZO0VBQ3RCLENBQUMsS0FBSyxDQUFXO0VBQ2pCLFVBQTZCO0VBRTdCLFlBQ0UsU0FBb0IsRUFDcEIsRUFBRSxZQUFZLGlCQUFpQixFQUFzQixHQUFHLENBQUMsQ0FBQyxDQUMxRDtJQUNBLElBQUksQ0FBQyxDQUFDLFNBQVMsR0FBRztJQUNsQixJQUFJLENBQUMsQ0FBQyxLQUFLLEdBQUcsZUFBZTtJQUM3QixJQUFJLENBQUMsU0FBUyxHQUFHO0VBQ25CO0VBRUEsSUFBSSxRQUFrQjtJQUNwQixPQUFPLElBQUksQ0FBQyxDQUFDLEtBQUs7RUFDcEI7RUFFQSxJQUFJLE1BQU0sS0FBZSxFQUFFO0lBQ3pCLElBQUksQ0FBQyxDQUFDLEtBQUssR0FBRztJQUNkLElBQUksQ0FBQyxDQUFDLFNBQVMsR0FBRyxhQUFhO0VBQ2pDO0VBRUEsSUFBSSxZQUF1QjtJQUN6QixPQUFPLElBQUksQ0FBQyxDQUFDLFNBQVM7RUFDeEI7RUFDQSxJQUFJLFVBQVUsU0FBb0IsRUFBRTtJQUNsQyxJQUFJLENBQUMsQ0FBQyxTQUFTLEdBQUc7SUFDbEIsSUFBSSxDQUFDLENBQUMsS0FBSyxHQUFHLGVBQWU7RUFDL0I7RUFFQSxPQUFPLFNBQW9CLEVBQUU7SUFDM0IsSUFBSSxJQUFJLENBQUMsS0FBSyxHQUFHLFVBQVUsS0FBSyxFQUFFO0lBRWxDLE1BQU0sTUFBTSxJQUFJLENBQUMsTUFBTSxDQUFDO0lBQ3hCLElBQUksQ0FBQyxHQUFHLENBQUM7RUFDWDtFQUVBLE9BQU8sU0FBb0IsRUFBVTtJQUNuQyxPQUFPLElBQUksQ0FBQyxTQUFTLENBQUM7RUFDeEI7RUFFQSxJQUFJLElBQVksRUFBRSxDQUFDO0VBQ25CLFFBQVEsQ0FBQztFQUNULFVBQVUsQ0FBQztFQUVYLGlCQUFtQjtJQUNqQixJQUFJLENBQUMsT0FBTztFQUNkO0FBQ0YifQ==